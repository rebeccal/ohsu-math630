<!DOCTYPE html>
<html>
  <head>
    <title>Math 530/630: CM 1.2</title>
    <meta charset="utf-8">
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="css\ohsu.css" type="text/css" />
    <link rel="stylesheet" href="css\ohsu-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Math 530/630: CM 1.2
## Summarizing &amp; Visualizing Data

---




## Objects and functions

&gt; "To understand computations in R, two slogans are helpful:
- Everything that exists is an object, and 
- Everything that happens is a function call."


John Chambers, quoted in Advanced R, p. 79.
---
class: middle, inverse

## To make your `mutate` "stick"


```r
heart_bp &lt;- heart_bp %&gt;% 
  mutate(bp_ratio = BPXDI1 / BPXDI2)
```

&lt;!-- [From CM 1.2, slide #39](https://apreshill.github.io/ohsu-basic-stats/slides/cm012.html#39) --&gt;

---
class:middle, inverse, center
## Hygiene

![](https://media.giphy.com/media/tis8aekJB9s0E/giphy.gif)
---
class: center, middle, inverse
## Everyone do this right now...

![](https://media.giphy.com/media/zZRxy466qETsY/giphy.gif)

&gt; *"Daily work habit: Restart R very often and re-run your under-development script from the top." -[Jenny Bryan](https://www.tidyverse.org/articles/2017/12/workflow-vs-script/)*

Upper right pane: click on environment tab, then click on the broom

Lower left pane: in console tab, click on the broom too 

---
## RStudio Preferences

![](images/rstudio-preferences.png)
&lt;!-- --- --&gt;
&lt;!-- class: inverse, middle, center --&gt;
&lt;!-- ## Reminder --&gt;

&lt;!-- You guys are new learners... --&gt;

&lt;!-- ![](https://media.giphy.com/media/x9XRkwlj9gmju/giphy.gif) --&gt;

---
## It's (probably) you, not R 

https://ismayc.github.io/rbasics-book/6-errors.html

- `Error: could not find function`
- `Error: object not found`
- Misspellings
- Unmatched parentheses
- Missing commas
- Package not installed
- Package not loaded

Consider trying `sessionInfo()` in your script to make sure the package you think you are using is there!

---


```r
sessionInfo()
```

```
R version 3.5.1 (2018-07-02)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 8.1 x64 (build 9600)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] forcats_0.3.0   stringr_1.3.1   dplyr_0.7.6     purrr_0.2.5    
[5] readr_1.1.1     tidyr_0.8.1     tibble_1.4.2    ggplot2_3.0.0  
[9] tidyverse_1.2.1

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.18     cellranger_1.1.0 plyr_1.8.4       compiler_3.5.1  
 [5] pillar_1.3.0     bindr_0.1.1      tools_3.5.1      digest_0.6.16   
 [9] lubridate_1.7.4  jsonlite_1.5     evaluate_0.11    nlme_3.1-137    
[13] gtable_0.2.0     lattice_0.20-35  pkgconfig_2.0.2  rlang_0.2.2     
[17] cli_1.0.0        rstudioapi_0.7   yaml_2.2.0       haven_1.1.2     
[21] xfun_0.3         bindrcpp_0.2.2   withr_2.1.2      xml2_1.2.0      
[25] httr_1.3.1       knitr_1.20       hms_0.4.2        rprojroot_1.3-2 
[29] grid_3.5.1       tidyselect_0.2.4 glue_1.3.0       R6_2.2.2        
[33] readxl_1.1.0     rmarkdown_1.10   xaringan_0.7     modelr_0.1.2    
[37] magrittr_1.5     backports_1.1.2  scales_1.0.0     htmltools_0.3.6 
[41] rvest_0.3.2      assertthat_0.2.0 colorspace_1.3-2 stringi_1.1.7   
[45] lazyeval_0.2.1   munsell_0.5.0    broom_0.5.0      crayon_1.3.4    
```


&lt;!-- --- --&gt;
&lt;!-- class: inverse, middle, center --&gt;
&lt;!-- ## New `gitter` chat --&gt;


&lt;!-- ![](https://media.giphy.com/media/uRb2p09vY8lEs/giphy.gif) --&gt;

&lt;!-- Now on our class site: link to [gitter](https://gitter.im/conj620/Lobby?utm_source=share-link&amp;utm_medium=link&amp;utm_campaign=share-link) --&gt;

---
## How to ask for help

Key idea: make a "minimal reproducible example" (abbreviated: `REPREX`)

--

Minimum requirements:

- Use the smallest, simplest, most built-in data possible [(see next slide!)](#data).
- Include commands on a strict ‚Äúneed to run‚Äù basis.
- Whitespace rationing is not in effect.


From: https://reprex.tidyverse.org/articles/reprex-dos-and-donts.html

---
name: data
## Built-in data

A few good options always:


```r
iris
mtcars
airquality
ChickWeight
ToothGrowth
PlantGrowth
```

All of these are "built-in" datasets in R that you can just use and assume that *we* can also just use! üéâ

---
## Make a tibble by column

Using the `tibble` package...


```r
o2_by_col &lt;- tibble(
  x = 1:5, 
  y = 1, 
  z = letters[1:5]
)
o2_by_col
```

```
# A tibble: 5 x 3
      x     y z    
  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;
1     1     1 a    
2     2     1 b    
3     3     1 c    
4     4     1 d    
5     5     1 e    
```

https://tibble.tidyverse.org

---
## Make a tibble by row


```r
o2_by_row &lt;- tribble(
  ~x, ~y, ~z,
  1, 2, "a",
  3, 4, "b",
  5, 6, "c"
)
o2_by_row
```

```
# A tibble: 3 x 3
      x     y z    
  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
1     1     2 a    
2     3     4 b    
3     5     6 c    
```

---
## This seems like a lot of work!

["Yes, creating a great reprex requires work. You are asking other people to do work too. It‚Äôs a partnership. 80% of the time you will solve your own problem in the course of writing an excellent reprex. YMMV." -Jenny Bryan](https://reprex.tidyverse.org/articles/reprex-dos-and-donts.html)

To ask/get help, you'll:

- Use the smallest, simplest, most built-in data possible [(see next slide!)](#data); and include code for it!
- Include only code needed to reproduce the error (note that you should have opened a new file and tried it yourself first!)
- Try to format things to make it easier on us- indentations and spaces help!

---
class:middle, inverse, center

## ONWARD!
![](https://media.giphy.com/media/D7IkqiEvf70ty/giphy.gif)
---

## I'm assuming...

You have:

- a working version of R,

- a working version of RStudio,

- read chapters 2-5 and the Markdown Tutorial in ModernDive

- read the Markdown and Workflow Projects chapters in R4DS (and maybe more...)

- completed DataCamp's "Introduction to the Tidyverse" (all 4 chapters)

---
## Data Wrangling


.pull-left[

- print a tibble
  - `heart`

- install a package 
  - `install.packages("dplyr")`
  - do 1x per machine

- load an installed package
  - `library(dplyr)`
  - do 1x per work session

- assign a variable a name (`&lt;-`, think "gets") 

- `%&gt;%` (think "then")
]

--

.pull-right[

- `dplyr::filter`

- `dplyr::arrange`

- `dplyr::mutate`

]

---
## Data Visualization

all `ggplot2`

- `aes(x = , y = )` (aesthetics)
- `aes(x = , y = , color = )` (add color)
- `aes(x = , y = , size = )` (add size)
- `+ facet_wrap(~ )` (facetting)

---
## Grouping &amp; Summarizing

- `dplyr::group_by`

- `dplyr::summarize`

---
class: middle, center, inverse

# ‚åõÔ∏è

## Let's review some helpful functions for `summarize`

*especially useful for* `summarize`

*even more useful after a* `group_by`

See:

http://r4ds.had.co.nz/transform.html#summarise-funs

---




&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Description &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Usage &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; sum &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; sum(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; minimum &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; min(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; maximum &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; max(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; mean &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; mean(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; median &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; mean(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; standard deviation &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; sd(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; variance &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; var(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; rank &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; rank(x) &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

* All allow for `na.rm` argument to remove `NA` values before summarizing. The default setting for this argument is *always* `na.rm = FALSE`, so if there is one `NA` value the summary will be `NA`.

* See "Maths Functions" in the RStudio Base R Cheatsheet:
https://github.com/rstudio/cheatsheets/blob/master/base-r.pdf


&lt;!-- --- --&gt;
&lt;!-- class:center, middle, inverse --&gt;



&lt;!-- ## Muddiest points --&gt;


&lt;!-- ![](https://media.giphy.com/media/l44Q7lmy0QVQVbIm4/giphy.gif) --&gt;

&lt;!-- Go here: --&gt;

&lt;!-- https://bit.ly/conj620-cm013 --&gt;

---
class:middle, inverse, center

## Visualizing Data - Hans Rosling

&lt;iframe src="https://embed.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen" width="100%" height="400px"&gt;&lt;/iframe&gt;


---
## Summary statistics

Generally index one of three:

1. Center
1. Spread
1. Shape

We'll focus on the first two, will return to the third.

---
## Center

What are some ways we can measure "central tendency"?

--

1. Mean (`mean`)

--

1. Median (`median`)

--

1. Mode (not terribly helpful)

--

Measures of central tendency: The mean

https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3127352/

---
## Spread

What are some ways we can measure "variation"?

--

- range (`range`), 

--

- standard deviation (`sd`), 

--

- inter-quartile range (`IQR`)


---
## Datasets Exercise Part 1





1. Find a partner

1. Read in the data


```r
library(tidyverse)
bakers_dozen &lt;- read_csv("http://bit.ly/conj620-bakers-dozen")
```


1. `filter` for the dataset number you've been assigned

1. Confirm that you have 142 rows and three columns (one of which is dataset) (hint: try printing the dataset to your console)

1. Find the mean and standard deviation of `x` and `y` using `summarize`


---
class: center, middle


```r
for_class %&gt;% 
  group_by(dataset) %&gt;% 
  summarise_all(., funs(mean, sd)) 
```

```
# A tibble: 13 x 5
   dataset x_mean y_mean  x_sd  y_sd
     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1       1   54.3   47.8  16.8  26.9
 2       2   54.3   47.8  16.8  26.9
 3       3   54.3   47.8  16.8  26.9
 4       4   54.3   47.8  16.8  26.9
 5       5   54.3   47.8  16.8  26.9
 6       6   54.3   47.8  16.8  26.9
 7       7   54.3   47.8  16.8  26.9
 8       8   54.3   47.8  16.8  26.9
 9       9   54.3   47.8  16.8  26.9
10      10   54.3   47.8  16.8  26.9
11      11   54.3   47.8  16.8  26.9
12      12   54.3   47.8  16.8  26.9
13      13   54.3   47.8  16.8  26.9
```
---
## Datasets Exercise Part 2



1. Plot `x` versus `y` in a scatterplot using `ggplot2`

1. Discuss with your partner whether you think the summary statistics for `x` and `y` make sense, given your visualization.
---
class: center, middle

&lt;img src="cm012_files/figure-html/unnamed-chunk-12-1.png" width="65%" style="display: block; margin: auto;" /&gt;



---
class: middle, inverse, center

&lt;blockquote class="twitter-tweet" data-lang="en"&gt;&lt;p lang="en" dir="ltr"&gt;Don&amp;#39;t trust summary statistics. Always visualize your data first &lt;a href="https://t.co/63RxirsTuY"&gt;https://t.co/63RxirsTuY&lt;/a&gt; &lt;a href="https://t.co/5j94Dw9UAf"&gt;pic.twitter.com/5j94Dw9UAf&lt;/a&gt;&lt;/p&gt;&amp;mdash; Alberto Cairo (@albertocairo) &lt;a href="https://twitter.com/albertocairo/status/765167969139765250?ref_src=twsrc%5Etfw"&gt;August 15, 2016&lt;/a&gt;&lt;/blockquote&gt; &lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt; 


---
## Datasaurus Dozen

&lt;img src="https://i2.wp.com/flowingdata.com/wp-content/uploads/2017/05/DataDino-600x455.gif" width="50%" style="display: block; margin: auto;" /&gt;


- https://www.autodeskresearch.com/publications/samestats

- https://github.com/lockedata/datasauRus

&lt;!-- --- --&gt;
&lt;!-- ## Due before Thursday's class... --&gt;

&lt;!-- Do [these learning checks from Chapter 3](../cm013.html) in [ModernDive](http://moderndive.netlify.com/): --&gt;

&lt;!-- LC3.2-LC3.7, LC3.9-LC3.13, LC3.15 --&gt;

&lt;!-- Turn in on Sakai. --&gt;
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "atelier-lakeside-light",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
